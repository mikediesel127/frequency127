<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Frequency127</title>
<link rel="stylesheet" href="/assets/styles.css">
</head>
<body>
<div id="auth">
<div class="auth-card">
<div class="logo-hero">
<div class="dot-pulse"></div>
<h1>Frequency127</h1>
</div>
<p class="tagline">Your daily operating system</p>
<form id="login-form" class="form">
<div class="input-group">
<input type="text" id="login-user" placeholder="Username" required autocomplete="username">
</div>
<div class="input-group">
<input type="password" id="login-pass" placeholder="4-digit code" inputmode="numeric" maxlength="4" required autocomplete="current-password">
</div>
<button type="submit" class="btn-primary">Sign in</button>
<button type="button" id="show-signup" class="btn-ghost">Create account</button>
</form>
<form id="signup-form" class="form" hidden>
<div class="input-group">
<input type="text" id="signup-user" placeholder="Username" required autocomplete="username">
</div>
<div class="input-group">
<input type="password" id="signup-pass" placeholder="4-digit code" inputmode="numeric" maxlength="4" required autocomplete="new-password">
</div>
<button type="submit" class="btn-primary">Create</button>
<button type="button" id="show-login" class="btn-ghost">Back</button>
</form>
<div id="auth-error" class="error" hidden></div>
</div>
</div>

<div id="app" hidden>
<header class="header">
<div class="header-left">
<div class="dot-pulse"></div>
<span class="brand">Frequency127</span>
</div>
<div class="header-right">
<div class="user-badge">
<span id="username" class="username"></span>
<div class="xp-badge">
<span id="xp">0</span>
<span class="xp-label">XP</span>
</div>
</div>
<button id="settings-btn" class="btn-icon-ghost" title="Settings">
<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z" stroke="currentColor" stroke-width="1.5"/><path d="M16.5 10a6.5 6.5 0 01-.24 1.71l1.5.87-1 1.73-1.5-.87a6.5 6.5 0 01-1.48 1.48l.87 1.5-1.73 1-.87-1.5A6.5 6.5 0 0110 16.5a6.5 6.5 0 01-1.71-.24l-.87 1.5-1.73-1 .87-1.5a6.5 6.5 0 01-1.48-1.48l-1.5.87-1-1.73 1.5-.87A6.5 6.5 0 013.5 10a6.5 6.5 0 01.24-1.71l-1.5-.87 1-1.73 1.5.87a6.5 6.5 0 011.48-1.48l-.87-1.5 1.73-1 .87 1.5A6.5 6.5 0 0110 3.5a6.5 6.5 0 011.71.24l.87-1.5 1.73 1-.87 1.5a6.5 6.5 0 011.48 1.48l1.5-.87 1 1.73-1.5.87A6.5 6.5 0 0116.5 10z" stroke="currentColor" stroke-width="1.5"/></svg>
</button>
<button id="logout" class="btn-icon-ghost" title="Logout">
<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M13 3l4 4-4 4M17 7H7M7 17H3V3h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
</button>
</div>
</header>

<main class="main">
<aside class="sidebar">
<div class="card glass">
<h3 class="card-title">Friends</h3>
<div id="friends-list" class="chips"></div>
<button id="add-friend-btn" class="btn-ghost" style="width: 100%; margin-top: 12px; font-size: 13px;">+ Add Friend</button>
</div>

<div class="card glass">
<h3 class="card-title">Activity Feed</h3>
<div id="activity-feed" class="activity-list"></div>
</div>

<div class="card glass">
<h3 class="card-title">Discover</h3>
<div id="discover-list" class="chips">
<button id="discover-btn" class="chip">Browse Public Routines</button>
<button id="leaderboard-btn" class="chip">Leaderboard</button>
</div>
</div>

<div class="card glass">
<h3 class="card-title">Community</h3>
<div id="recent" class="chips"></div>
</div>
</aside>

<section class="content">
<div class="toolbar">
<h2 class="page-title">Routines</h2>
<button id="new-btn" class="btn-primary">
<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
New Routine
</button>
</div>

<div id="list" class="routine-grid"></div>
<div id="empty" class="empty-state" hidden>
<div class="empty-icon">✨</div>
<h3>No routines yet</h3>
<p>Create your first routine to start your journey</p>
<button id="empty-btn" class="btn-primary">Create Routine</button>
</div>
</section>
</main>
</div>

<dialog id="builder-modal" class="modal">
<div class="modal-content builder">
<div class="modal-header">
<h3 id="builder-title">New Routine</h3>
<button type="button" id="builder-close" class="btn-icon-ghost">×</button>
</div>

<div class="builder-body">
<div class="input-group">
<input type="text" id="builder-routine-name" placeholder="Routine name" required>
</div>

<div style="display: flex; align-items: center; gap: 8px; margin: 16px 0; padding: 12px; background: rgba(255, 255, 255, 0.03); border: 1px solid var(--border); border-radius: var(--radius-sm);">
<input type="checkbox" id="builder-is-public" style="width: auto; cursor: pointer;">
<label for="builder-is-public" style="cursor: pointer; font-size: 14px; color: var(--text); margin: 0;">Make this routine public (others can discover and copy it)</label>
</div>

<div class="steps-section">
<h4>Steps</h4>
<div id="builder-steps-list" class="steps-list"></div>
</div>

<div class="step-types">
<button type="button" class="step-type-btn" data-type="affirmation">
<span class="step-icon">💭</span>
<span>Affirmation</span>
</button>
<button type="button" class="step-type-btn" data-type="breathwork">
<span class="step-icon">🌬️</span>
<span>Breathwork</span>
</button>
<button type="button" class="step-type-btn" data-type="timer">
<span class="step-icon">⏱️</span>
<span>Timer</span>
</button>
<button type="button" class="step-type-btn" data-type="note">
<span class="step-icon">📝</span>
<span>Note</span>
</button>
</div>
</div>

<div class="modal-footer">
<button type="button" id="builder-cancel" class="btn-ghost">Cancel</button>
<button type="button" id="builder-save" class="btn-primary">Save Routine</button>
</div>
</div>
</dialog>

<dialog id="runner-modal" class="modal runner-modal">
<div class="runner-content">
<button id="runner-close" class="runner-close">×</button>
<div id="runner-step" class="runner-step"></div>
<div class="runner-nav">
<button id="runner-prev" class="btn-ghost">← Previous</button>
<div class="runner-progress">
<span id="runner-current">1</span> / <span id="runner-total">1</span>
</div>
<button id="runner-next" class="btn-primary">Next →</button>
</div>
</div>
</dialog>

<dialog id="settings-modal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3>Settings</h3>
<button type="button" id="settings-close" class="btn-icon-ghost">×</button>
</div>

<div class="builder-body">
<div class="settings-section">
<h4 style="font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 16px;">Theme</h4>
<div class="theme-grid">
<button class="theme-option" data-theme="dark">
<div class="theme-preview" style="background: linear-gradient(135deg, #0a0e13 0%, #58a6ff 100%);"></div>
<span>Dark</span>
</button>
<button class="theme-option" data-theme="light">
<div class="theme-preview" style="background: linear-gradient(135deg, #f6f8fa 0%, #0969da 100%);"></div>
<span>Light</span>
</button>
<button class="theme-option" data-theme="ocean">
<div class="theme-preview" style="background: linear-gradient(135deg, #0a1628 0%, #38bdf8 100%);"></div>
<span>Ocean</span>
</button>
<button class="theme-option" data-theme="sunset">
<div class="theme-preview" style="background: linear-gradient(135deg, #1a0f0a 0%, #fb923c 100%);"></div>
<span>Sunset</span>
</button>
<button class="theme-option" data-theme="forest">
<div class="theme-preview" style="background: linear-gradient(135deg, #0a1409 0%, #4ade80 100%);"></div>
<span>Forest</span>
</button>
<button class="theme-option" data-theme="purple">
<div class="theme-preview" style="background: linear-gradient(135deg, #160a1e 0%, #c084fc 100%);"></div>
<span>Purple</span>
</button>
</div>
</div>

<div class="settings-section" style="margin-top: 24px;">
<h4 style="font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 16px;">Notifications</h4>
<div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
<input type="checkbox" id="notifications-enabled" style="width: auto; cursor: pointer;">
<label for="notifications-enabled" style="cursor: pointer; font-size: 14px; color: var(--text); margin: 0;">Enable push notifications</label>
</div>
<div id="notification-times-section" hidden>
<p style="font-size: 13px; color: var(--text-muted); margin-bottom: 12px;">Daily reminder times:</p>
<div id="notification-times-list"></div>
<button type="button" id="add-notification-time" class="btn-ghost" style="width: 100%; margin-top: 8px; font-size: 13px;">+ Add Time</button>
</div>
</div>

<div class="settings-section" style="margin-top: 24px;">
<h4 style="font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 16px;">Achievements</h4>
<div id="achievements-list" class="achievements-grid"></div>
</div>
</div>

<div class="modal-footer">
<button type="button" id="settings-done" class="btn-primary">Done</button>
</div>
</div>
</dialog>

<dialog id="add-friend-modal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3>Add Friend</h3>
<button type="button" id="add-friend-close" class="btn-icon-ghost">×</button>
</div>

<div class="builder-body">
<div class="input-group">
<input type="text" id="friend-username" placeholder="Friend's username" required>
</div>
<div id="friend-error" class="error" hidden></div>
</div>

<div class="modal-footer">
<button type="button" id="add-friend-cancel" class="btn-ghost">Cancel</button>
<button type="button" id="add-friend-submit" class="btn-primary">Add Friend</button>
</div>
</div>
</dialog>

<dialog id="discover-modal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3>Discover Public Routines</h3>
<button type="button" id="discover-close" class="btn-icon-ghost">×</button>
</div>

<div class="builder-body">
<div id="public-routines-list" class="routine-grid"></div>
<div id="discover-empty" class="empty-state" style="padding: 40px 20px;">
<div class="empty-icon" style="font-size: 48px;">🔍</div>
<h3 style="font-size: 18px;">No public routines yet</h3>
<p style="font-size: 14px;">Be the first to share a routine!</p>
</div>
</div>

<div class="modal-footer">
<button type="button" id="discover-done" class="btn-primary">Close</button>
</div>
</div>
</dialog>

<dialog id="user-profile-modal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3 id="profile-username">User Profile</h3>
<button type="button" id="profile-close" class="btn-icon-ghost">×</button>
</div>

<div class="builder-body">
<div style="text-align: center; margin-bottom: 24px;">
<div class="user-avatar" style="width: 80px; height: 80px; border-radius: 50%; background: var(--accent); margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 36px; font-weight: 800; color: var(--bg);" id="profile-avatar">A</div>
<div style="display: flex; gap: 24px; justify-content: center; margin-top: 16px;">
<div>
<div style="font-size: 24px; font-weight: 800; color: var(--text);" id="profile-xp">0</div>
<div style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">XP</div>
</div>
<div>
<div style="font-size: 24px; font-weight: 800; color: var(--text);" id="profile-streak">0</div>
<div style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Streak</div>
</div>
<div>
<div style="font-size: 24px; font-weight: 800; color: var(--text);" id="profile-completions">0</div>
<div style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Completions</div>
</div>
</div>
</div>

<div id="profile-add-friend-section" hidden style="margin-bottom: 16px;">
<button type="button" id="profile-add-friend-btn" class="btn-primary" style="width: 100%;">Add Friend</button>
</div>

<div class="settings-section">
<h4 style="font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 12px;">Public Routines</h4>
<div id="profile-routines-list" class="routine-grid"></div>
<div id="profile-no-routines" hidden style="text-align: center; padding: 20px; color: var(--text-muted); font-size: 14px;">No public routines yet</div>
</div>

<div class="settings-section" style="margin-top: 20px;">
<h4 style="font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 12px;">Achievements</h4>
<div id="profile-achievements-list" class="achievements-grid"></div>
<div id="profile-no-achievements" hidden style="text-align: center; padding: 20px; color: var(--text-muted); font-size: 14px;">No achievements unlocked yet</div>
</div>
</div>

<div class="modal-footer">
<button type="button" id="profile-done" class="btn-primary">Close</button>
</div>
</div>
</dialog>

<dialog id="leaderboard-modal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3>Leaderboard</h3>
<button type="button" id="leaderboard-close" class="btn-icon-ghost">×</button>
</div>

<div class="builder-body">
<div class="leaderboard-tabs">
<button class="leaderboard-tab active" data-tab="xp">Top XP</button>
<button class="leaderboard-tab" data-tab="streak">Top Streak</button>
</div>

<div id="leaderboard-xp" class="leaderboard-content">
<div id="leaderboard-xp-list" class="leaderboard-list"></div>
</div>

<div id="leaderboard-streak" class="leaderboard-content" hidden>
<div id="leaderboard-streak-list" class="leaderboard-list"></div>
</div>
</div>

<div class="modal-footer">
<button type="button" id="leaderboard-done" class="btn-primary">Close</button>
</div>
</div>
</dialog>

<template id="step-item-tpl">
<div class="step-item" draggable="true">
<div class="step-drag">⋮⋮</div>
<div class="step-content">
<div class="step-header">
<span class="step-icon"></span>
<span class="step-type-label"></span>
</div>
<textarea class="step-input" placeholder="Enter content..." rows="2"></textarea>
</div>
<button class="step-remove" type="button">×</button>
</div>
</template>

<template id="routine-card-tpl">
<div class="routine-card glass">
<div class="routine-header">
<h4 class="routine-name"></h4>
<div class="routine-actions">
<button class="btn-icon run-btn" title="Run">
<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4 2l10 6-10 6V2z"/></svg>
</button>
<button class="btn-icon edit-btn" title="Edit">
<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M11.5 2.5l2 2L6 12H4v-2l7.5-7.5z" stroke="currentColor" stroke-width="1.5"/></svg>
</button>
<button class="btn-icon del-btn" title="Delete">
<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 4h10M6 4V3h4v1M5 4v9h6V4" stroke="currentColor" stroke-width="1.5"/></svg>
</button>
</div>
</div>
<div class="routine-meta">
<span class="step-count"></span>
<span class="completion-badge" hidden>✓ Completed</span>
</div>
<div class="routine-steps-preview"></div>
</div>
</template>

<script src="/assets/app.js"></script>
</body>
</html>